/*
 * JQuery zTree 2.6 beta
 * http://code.google.com/p/jquerytree/
 * email: hunter.z@263.net
 * Copyright (c) 2010 Hunter.z
 * Date: 2011-05-20
 */
(function(h){function kb(a,b){var c={treeObjId:a.treeObjId};a.treeObj.unbind("click",w);a.treeObj.bind("click",c,w);a.treeObj.unbind("dblclick",w);a.treeObj.bind("dblclick",c,w);a.treeObj.unbind("mouseover",w);a.treeObj.bind("mouseover",c,w);a.treeObj.unbind("mouseout",w);a.treeObj.bind("mouseout",c,w);a.treeObj.unbind("mousedown",w);a.treeObj.bind("mousedown",c,w);a.treeObj.unbind("mouseup",w);a.treeObj.bind("mouseup",c,w);a.treeObj.unbind("contextmenu",w);a.treeObj.bind("contextmenu",c,w);b.unbind(na);
b.bind(na,function(d,e,g){i.apply(a.callback.nodeCreated,[d,e,g])});b.unbind(oa);b.bind(oa,function(d,e,g){i.apply(a.callback.click,[d,e,g])});b.unbind(pa);b.bind(pa,function(d,e,g){i.apply(a.callback.change,[d,e,g])});b.unbind(qa);b.bind(qa,function(d,e,g){i.apply(a.callback.rename,[d,e,g])});b.unbind(ra);b.bind(ra,function(d,e,g){i.apply(a.callback.remove,[d,e,g])});b.unbind(sa);b.bind(sa,function(d,e,g){i.apply(a.callback.drag,[d,e,g])});b.unbind(fa);b.bind(fa,function(d,e,g,f,k){i.apply(a.callback.drop,
[d,e,g,f,k])});b.unbind(ta);b.bind(ta,function(d,e,g){i.apply(a.callback.expand,[d,e,g])});b.unbind(ua);b.bind(ua,function(d,e,g){i.apply(a.callback.collapse,[d,e,g])});b.unbind(va);b.bind(va,function(d,e,g,f){i.apply(a.callback.asyncSuccess,[d,e,g,f])});b.unbind(wa);b.bind(wa,function(d,e,g,f,k,o){i.apply(a.callback.asyncError,[d,e,g,f,k,o])})}function ga(a,b,c,d){if(c){b=Ma(a,b,c,d);d?h("#"+d.tId+C).append(b.join("")):a.treeObj.append(b.join(""));T(a,d);Na(a,c)}}function Na(a,b){for(var c=0;c<b.length;c++){var d=
b[c];i.apply(a.addDiyDom,[a.treeObjId,d]);a.treeObj.trigger(na,[a.treeObjId,d]);d[a.nodesCol]&&d[a.nodesCol].length>0&&Na(a,d[a.nodesCol],d)}}function Ma(a,b,c,d){if(!c)return[];for(var e=[],g=0;g<c.length;g++){var f=c[g];f.level=b;f.tId=a.treeObjId+"_"+ ++lb;f.parentNode=d;f[a.checkedCol]=f[a.checkedCol]==true;f.checkedOld=f[a.checkedCol];f.check_Focus=false;f.check_True_Full=true;f.check_False_Full=true;f.editNameStatus=false;f.isAjaxing=null;R[f.tId]=f;Oa(a,f);f.isFirstNode=(d?d:a.root)[a.nodesCol].length==
c.length&&g==0;f.isLastNode=g==c.length-1;if(f[a.nodesCol]&&f[a.nodesCol].length>0){f.open=f.open?true:false;f.isParent=true}else f.isParent=f.isParent?true:false;var k=f.url&&!a.editable?f.url:null,o=Pa(a,f),j=[],A;for(A in o)j.push(A,":",o[A],";");o=[];if(f[a.nodesCol]&&f[a.nodesCol].length>0)o=Ma(a,b+1,f[a.nodesCol],f);e.push("<li id='",f.tId,"' treenode>","<button type='button' id='",f.tId,F,"' title='' class='",Qa(a,f),"' treeNode",F," onfocus='this.blur();'></button>");if(a.checkable){Ra(a,
f);if(a.checkStyle==U&&a.checkRadioType==xa&&f[a.checkedCol])a.checkRadioCheckedList=a.checkRadioCheckedList.concat([f]);e.push("<button type='button' ID='",f.tId,x,"' class='",Sa(a,f),"' treeNode",x," onfocus='this.blur();' ></button>")}e.push("<a id='",f.tId,p,"' treeNode",p,' onclick="',f.click||"",'" ',k!=null&&k.length>0?"href='"+k+"'":""," target='",f.target||"_blank","' style='",j.join(""),"'><button type='button' id='",f.tId,u,"' title='' treeNode",u," onfocus='this.blur();' class='",Ta(a,
f),"' style='",ya(a,f),"'></button><span id='",f.tId,V,"'>",f[a.nameCol].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"</span></a><ul id='",f.tId,C,"' class='",a.showLine&&!f.isLastNode?ha:"","' style='display:",f.open?"block":"none","'>");e.push(o.join(""));e.push("</ul></li>")}return e}function W(a,b,c){if(!b)return null;for(;b&&b.id!==a.treeObjId;){for(var d=0;b.tagName&&d<c.length;d++)if(i.eqs(b.tagName,c[d].tagName)&&b.getAttribute(c[d].attrName)!==null)return b;b=b.parentNode}return null}
function w(a){var b=a.target,c=q[a.data.treeObjId],d="",e="",g="",f=null;if(i.eqs(a.type,"mouseover"))if(c.checkable&&i.eqs(b.tagName,"button")&&b.getAttribute("treeNode"+x)!==null){d=b.parentNode.id;e="mouseoverCheck"}else if(f=W(c,b,[{tagName:"a",attrName:"treeNode"+p}])){d=f.parentNode.id;e="hoverOverNode"}else{d="remove";e="hoverOutNode"}else if(i.eqs(a.type,"mouseout")){if(c.checkable&&i.eqs(b.tagName,"button")&&b.getAttribute("treeNode"+x)!==null){d=b.parentNode.id;e="mouseoutCheck"}}else if(i.eqs(a.type,
"mousedown")){g="mousedown";if(f=W(c,b,[{tagName:"a",attrName:"treeNode"+p}])){d=f.parentNode.id;e="mousedownNode"}}else if(i.eqs(a.type,"mouseup")){g="mouseup";if(f=W(c,b,[{tagName:"a",attrName:"treeNode"+p}]))d=f.parentNode.id}else if(i.eqs(a.type,"contextmenu")){g="contextmenu";if(f=W(c,b,[{tagName:"a",attrName:"treeNode"+p}]))d=f.parentNode.id}else if(i.eqs(a.type,"click"))if(i.eqs(b.tagName,"button")&&b.getAttribute("treeNode"+F)!==null){d=b.parentNode.id;e="switchNode"}else if(c.checkable&&
i.eqs(b.tagName,"button")&&b.getAttribute("treeNode"+x)!==null){d=b.parentNode.id;e="checkNode"}else{if(f=W(c,b,[{tagName:"a",attrName:"treeNode"+p}])){d=f.parentNode.id;e="clickNode"}}else if(i.eqs(a.type,"dblclick")){g="dblclick";if(f=W(c,b,[{tagName:"a",attrName:"treeNode"+p}])){d=f.parentNode.id;e="switchNode"}}if(d.length>0||g.length>0)if(e!="hoverOverNode"&&e!="hoverOutNode"&&e!="mouseoverCheck"&&e!="mouseoutCheck"&&b.getAttribute("treeNode"+X)===null&&!I.checkEvent(c))return false;if(d.length>
0){c.curTreeNode&&c.curTreeNode.editNameStatus||i.noSel();a.data.treeNode=R[d];switch(e){case "switchNode":B.onSwitchNode(a);break;case "clickNode":B.onClickNode(a);break;case "checkNode":B.onCheckNode(a);break;case "mouseoverCheck":B.onMouseoverCheck(a);break;case "mouseoutCheck":B.onMouseoutCheck(a);break;case "mousedownNode":B.onMousedownNode(a);break;case "hoverOverNode":B.onHoverOverNode(a);break;case "hoverOutNode":B.onHoverOutNode(a)}}else a.data.treeNode=null;switch(g){case "mousedown":return B.onZTreeMousedown(a);
case "mouseup":return B.onZTreeMouseup(a);case "dblclick":return B.onZTreeDblclick(a);case "contextmenu":return B.onZTreeContextmenu(a)}}function Ua(a){for(;ia.length>0;){ia[0].remove();ia.shift()}if(a){a=h("iframe");for(var b=0;b<a.length;b++){var c=a.get(b),d=i.getAbs(c);c=h("<div id='zTreeMask_"+b+"' class='zTreeMask' style='top:"+d[1]+"px; left:"+d[0]+"px; width:"+c.offsetWidth+"px; height:"+c.offsetHeight+"px;'></div>");c.appendTo("body");ia.push(c)}}}function S(a,b){if(b){var c=h("#"+b.tId+
F),d=h("#"+b.tId+C),e=h("#"+b.tId+u),g=a.showLine&&!b.isLastNode?ha:"";g.length==0?d.removeClass(ha):d.addClass(g);c.attr("class",Qa(a,b));e.attr("style",ya(a,b));e.attr("class",Ta(a,b))}}function Qa(a,b){var c=["switch"];if(a.showLine)if(b.level==0&&b.isFirstNode&&b.isLastNode)c.push(za);else if(b.level==0&&b.isFirstNode)c.push(Aa);else b.isLastNode?c.push(ja):c.push(Va);else c.push(Wa);b.isParent?c.push(b.open?M:N):c.push(O);return c.join("_")}function Ta(a,b){var c=["ico"];if(!b.isAjaxing){c[0]=
(b.iconSkin?b.iconSkin:"")+" "+c[0];b.isParent?c.push(b.open?M:N):c.push(O)}return c.join("_")}function ya(a,b){var c=[];if(!b.isAjaxing){var d=b.isParent&&b.iconOpen&&b.iconClose?b.open?b.iconOpen:b.iconClose:b.icon;d&&c.push("background:url(",d,") 0 0 no-repeat;");if(a.showIcon==false||!i.apply(a.showIcon,[a.treeObjId,b],true))c.push("width:0px;height:0px;")}return c.join("")}function Pa(a,b){var c=i.apply(a.fontCss,[a.treeObjId,b]);if(c==null)c=a.fontCss;return c?c:{}}function G(a,b){if(a){var c=
a.attr("class");if(c!=undefined){c=c.split("_");switch(b){case za:case Aa:case Va:case ja:case Wa:c[1]=b;break;case M:case N:case O:c[2]=b}a.attr("class",c.join("_"))}}}function Y(a,b,c){if(!(!b||a.isAjaxing)){a=b.attr("class");if(a!=undefined){a=a.split("_");switch(c){case M:case N:case O:a[1]=c}b.attr("class",a.join("_"))}}}function Xa(a,b){if(a.dragStatus==0){b.isHover=true;if(a.editable){mb(a,b);nb(a,b)}i.apply(a.addHoverDom,[a.treeObjId,b])}}function Z(a,b){b.isHover=false;h("#"+b.tId+$).unbind().remove();
h("#"+b.tId+aa).unbind().remove();i.apply(a.removeHoverDom,[a.treeObjId,b])}function mb(a,b){if(!(b.editNameStatus||h("#"+b.tId+$).length>0))if(i.apply(a.edit_renameBtn,[b],a.edit_renameBtn)){h("#"+b.tId+V).after("<button type='button' class='edit' id='"+b.tId+$+"' title='' treeNode"+$+" onfocus='this.blur();' style='display:none;'></button>");h("#"+b.tId+$).bind("click",function(){if(i.apply(a.callback.beforeRename,[a.treeObjId,b],true)==false)return true;b.editNameStatus=true;Z(a,b);J(a,b);return false}).show()}}
function nb(a,b){if(!(!a.edit_removeBtn||h("#"+b.tId+aa).length>0))if(i.apply(a.edit_removeBtn,[b],a.edit_removeBtn)){h("#"+b.tId+p).append("<button type='button' class='remove' id='"+b.tId+aa+"' title='' treeNode"+aa+" onfocus='this.blur();' style='display:none;'></button>");h("#"+b.tId+aa).bind("click",function(){if(i.apply(a.callback.beforeRemove,[a.treeObjId,b],true)==false)return true;Ba(a,b);a.treeObj.trigger(ra,[a.treeObjId,b]);return false}).bind("mousedown",function(){return true}).show()}}
function Ya(a,b){var c,d;if(a.checkStyle==U)if(b[a.checkedCol])if(a.checkRadioType==xa){for(d=a.checkRadioCheckedList.length-1;d>=0;d--){c=a.checkRadioCheckedList[d];c[a.checkedCol]=false;a.checkRadioCheckedList.splice(d,1);K(a,h("#"+c.tId+x),c);c.parentNode!=b.parentNode&&T(a,c)}a.checkRadioCheckedList=a.checkRadioCheckedList.concat([b])}else{d=b.parentNode?b.parentNode:a.root;for(var e=0;e<d[a.nodesCol].length;e++){c=d[a.nodesCol][e];if(c[a.checkedCol]&&c!=b){c[a.checkedCol]=false;K(a,h("#"+c.tId+
x),c)}}}else{if(a.checkRadioType==xa)for(d=0;d<a.checkRadioCheckedList.length;d++)if(b==a.checkRadioCheckedList[d]){a.checkRadioCheckedList.splice(d,1);break}}else{b[a.checkedCol]&&a.checkType.Y.indexOf("s")>-1&&ka(a,b,true);b[a.checkedCol]&&a.checkType.Y.indexOf("p")>-1&&Ca(a,b,true);!b[a.checkedCol]&&a.checkType.N.indexOf("s")>-1&&ka(a,b,false);!b[a.checkedCol]&&a.checkType.N.indexOf("p")>-1&&Ca(a,b,false)}}function Ca(a,b,c){var d=h("#"+b.tId+x);b[a.checkedCol]=c;K(a,d,b);if(b.parentNode){d=true;
if(!c)for(var e=0;e<b.parentNode[a.nodesCol].length;e++)if(b.parentNode[a.nodesCol][e][a.checkedCol]){d=false;break}d&&Ca(a,b.parentNode,c)}}function ka(a,b,c){if(b){var d=h("#"+b.tId+x);if(b!=a.root){b[a.checkedCol]=c;b.check_True_Full=true;b.check_False_Full=true;K(a,d,b)}if(b[a.nodesCol])for(d=0;d<b[a.nodesCol].length;d++)b[a.nodesCol][d]&&ka(a,b[a.nodesCol][d],c)}}function K(a,b,c){if(b){b.removeClass();b.addClass(Sa(a,c))}}function Sa(a,b){var c=a.checkStyle+"_"+(b[a.checkedCol]?ob:pb)+"_"+(b[a.checkedCol]||
a.checkStyle==U?b.check_True_Full?Za:$a:b.check_False_Full?Za:$a);c=b.checkboxFocus?c+"_"+qb:c;return rb+" "+c}function Da(a,b){if(b&&b.parentNode){ab(a,b.parentNode);Da(a,b.parentNode)}}function T(a,b){if(b)b[a.nodesCol]&&b[a.nodesCol].length>0?Da(a,b[a.nodesCol][0]):Da(a,b)}function ab(a,b){if(b){Ra(a,b);var c=h("#"+b.tId+x);K(a,c,b)}}function Ra(a,b){if(b){var c={trueFlag:true,falseFlag:true};if(b[a.nodesCol])for(var d=0;d<b[a.nodesCol].length;d++){if(a.checkStyle==U&&(b[a.nodesCol][d][a.checkedCol]||
!b[a.nodesCol][d].check_True_Full))c.trueFlag=false;else if(a.checkStyle!=U&&b[a.checkedCol]&&(!b[a.nodesCol][d][a.checkedCol]||!b[a.nodesCol][d].check_True_Full))c.trueFlag=false;else if(a.checkStyle!=U&&!b[a.checkedCol]&&(b[a.nodesCol][d][a.checkedCol]||!b[a.nodesCol][d].check_False_Full))c.falseFlag=false;if(!c.trueFlag||!c.falseFlag)break}b.check_True_Full=c.trueFlag;b.check_False_Full=c.falseFlag}}function Ea(a,b){if(b.open||b&&b[a.nodesCol]&&b[a.nodesCol].length>0)P(a,b,!b.open);else if(a.async)i.apply(a.callback.beforeAsync,
[a.treeObjId,b],true)==false?P(a,b,!b.open):Fa(a,b);else b&&P(a,b,!b.open)}function Fa(a,b){var c;if(!(b&&(b.isAjaxing||!b.isParent))){if(b){b.isAjaxing=true;h("#"+b.tId+u).attr("class","ico_loading")}var d="";for(c=0;b&&c<a.asyncParam.length;c++)d+=(d.length>0?"&":"")+a.asyncParam[c]+"="+b[a.asyncParam[c]];if(i.isArray(a.asyncParamOther))for(c=0;c<a.asyncParamOther.length;c+=2)d+=(d.length>0?"&":"")+a.asyncParamOther[c]+"="+a.asyncParamOther[c+1];else for(var e in a.asyncParamOther)d+=(d.length>
0?"&":"")+e+"="+a.asyncParamOther[e];h.ajax({type:"POST",url:i.apply(a.asyncUrl,[b],a.asyncUrl),data:d,dataType:"text",success:function(g){var f=[];try{f=!g||g.length==0?[]:typeof g=="string"?eval("("+g+")"):g}catch(k){}if(b)b.isAjaxing=null;S(a,b);if(f&&f!=""){f=i.apply(a.asyncDataFilter,[a.treeObjId,b,f],f);L(a,b,f,false)}else L(a,b,[],false);a.treeObj.trigger(va,[a.treeObjId,b,g])},error:function(g,f,k){a.expandTriggerFlag=false;S(a,b);if(b)b.isAjaxing=null;a.treeObj.trigger(wa,[a.treeObjId,b,
g,f,k])}})}}function P(a,b,c,d,e){if(!b||b.open==c)i.apply(e,[]);else{if(a.expandTriggerFlag){e=function(){b.open?a.treeObj.trigger(ta,[a.treeObjId,b]):a.treeObj.trigger(ua,[a.treeObjId,b])};a.expandTriggerFlag=false}c=h("#"+b.tId+F);var g=h("#"+b.tId+u),f=h("#"+b.tId+C);if(b.isParent){b.open=!b.open;b.iconOpen&&b.iconClose&&g.attr("style",ya(a,b));if(b.open){G(c,M);Y(b,g,M);if(d==false||a.expandSpeed==""){f.show();i.apply(e,[])}else if(b[a.nodesCol]&&b[a.nodesCol].length>0)f.show(a.expandSpeed,e);
else{f.show();i.apply(e,[])}}else{G(c,N);Y(b,g,N);if(d==false||a.expandSpeed==""){f.hide();i.apply(e,[])}else f.hide(a.expandSpeed,e)}}else i.apply(e,[])}}function Ga(a,b,c,d,e){var g=b?b[a.nodesCol]:a.root[a.nodesCol],f=b?false:d;if(g)for(var k=0;k<g.length;k++)g[k]&&Ga(a,g[k],c,f);P(a,b,c,d,e)}function ba(a,b,c,d,e){if(b)if(b.parentNode){P(a,b,c,d);b.parentNode&&ba(a,b.parentNode,c,d,e)}else P(a,b,c,d,e)}function bb(a,b,c){if(c){c.level=b?b.level+1:0;if(c[a.nodesCol])for(b=0;b<c[a.nodesCol].length;b++)c[a.nodesCol][b]&&
bb(a,c,c[a.nodesCol][b])}}function L(a,b,c,d){if(!(a.keepLeaf&&b&&!b.isParent)){if(a.isSimpleData)c=Ha(a,c);if(b){if(a.treeObj.find("#"+b.tId).length!=0){var e=h("#"+b.tId+F),g=h("#"+b.tId+u),f=h("#"+b.tId+C);if(!b.open){G(e,N);Y(b,g,N);b.open=false;f.css({display:"none"})}cb(a,b,c);ga(a,b.level+1,c,b);d||ba(a,b,true)}}else{cb(a,a.root,c);ga(a,0,c,null)}}}function cb(a,b,c){b[a.nodesCol]||(b[a.nodesCol]=[]);if(b[a.nodesCol].length>0){b[a.nodesCol][b[a.nodesCol].length-1].isLastNode=false;S(a,b[a.nodesCol][b[a.nodesCol].length-
1])}b.isParent=true;b[a.nodesCol]=b[a.nodesCol].concat(c)}function ca(a,b,c,d,e){if(b!=c)if(!(a.keepLeaf&&b&&!b.isParent&&d==t)){var g=c.parentNode==null?a.root:c.parentNode,f=b===null||b==a.root;if(f&&b===null)b=a.root;if(f)d=t;var k=b.parentNode?b.parentNode:a.root;if(d!=da&&d!=la)d=t;var o,j=-1,A=0,D=null,n=null;if(c.isFirstNode){j=0;if(g[a.nodesCol].length>1){D=g[a.nodesCol][1];D.isFirstNode=true}}else if(c.isLastNode){j=g[a.nodesCol].length-1;D=g[a.nodesCol][j-1];D.isLastNode=true}else for(o=
0;o<g[a.nodesCol].length;o++)if(g[a.nodesCol][o].tId==c.tId)j=o;j>=0&&g[a.nodesCol].splice(j,1);if(d!=t)for(o=0;o<k[a.nodesCol].length;o++)if(k[a.nodesCol][o].tId==b.tId)A=o;if(d==t){if(f)c.parentNode=null;else{b.isParent=true;c.parentNode=b}b[a.nodesCol]||(b[a.nodesCol]=[]);if(b[a.nodesCol].length>0){n=b[a.nodesCol][b[a.nodesCol].length-1];n.isLastNode=false}b[a.nodesCol].splice(b[a.nodesCol].length,0,c);c.isLastNode=true;c.isFirstNode=b[a.nodesCol].length==1}else if(b.isFirstNode&&d==da){k[a.nodesCol].splice(A,
0,c);n=b;n.isFirstNode=false;c.parentNode=b.parentNode;c.isFirstNode=true;c.isLastNode=false}else if(b.isLastNode&&d==la){k[a.nodesCol].splice(A+1,0,c);n=b;n.isLastNode=false;c.parentNode=b.parentNode;c.isFirstNode=false;c.isLastNode=true}else{d==da?k[a.nodesCol].splice(A,0,c):k[a.nodesCol].splice(A+1,0,c);c.parentNode=b.parentNode;c.isFirstNode=false;c.isLastNode=false}Oa(a,c);bb(a,c.parentNode,c);var r,ma;if(f)k=f=a.treeObj;else{f=h("#"+b.tId);r=h("#"+b.tId+F);ma=h("#"+b.tId+u);k=h("#"+b.tId+C)}if(d==
t){G(r,M);Y(b,ma,M);b.open=true;k.css({display:"block"});k.append(h("#"+c.tId).remove(null,true))}else if(d==da)f.before(h("#"+c.tId).remove(null,true));else d==la&&f.after(h("#"+c.tId).remove(null,true));S(a,c);if(!a.keepParent&&g[a.nodesCol].length<1){g.isParent=false;b=h("#"+g.tId+C);d=h("#"+g.tId+F);D=h("#"+g.tId+u);G(d,O);Y(g,D,O);b.css("display","none")}else D&&S(a,D);n&&S(a,n);if(a.checkable){ab(a,g);T(a,g);g!=c.parent&&T(a,c)}ba(a,c.parentNode,true,e)}}function Oa(a,b){if(a.isSimpleData)b[a.treeNodeParentKey]=
b.parentNode?b.parentNode[a.treeNodeKey]:a.rootPID}function Ba(a,b){var c=b.parentNode==null?a.root:b.parentNode;if(a.curTreeNode===b)a.curTreeNode=null;if(a.curEditTreeNode===b)a.curEditTreeNode=null;h("#"+b.tId).remove();delete R[b.tId];for(var d=-1,e=0;e<c[a.nodesCol].length;e++)if(c[a.nodesCol][e].tId==b.tId)d=e;d>=0&&c[a.nodesCol].splice(d,1);var g;if(!a.keepParent&&c[a.nodesCol].length<1){c.isParent=false;c.open=false;d=h("#"+c.tId+C);e=h("#"+c.tId+F);g=h("#"+c.tId+u);G(e,O);Y(c,g,O);d.css("display",
"none")}else if(a.showLine&&c[a.nodesCol].length>0){c[a.nodesCol][c[a.nodesCol].length-1].isLastNode=true;c[a.nodesCol][c[a.nodesCol].length-1].isFirstNode=c[a.nodesCol].length==1;d=h("#"+c[a.nodesCol][c[a.nodesCol].length-1].tId+C);e=h("#"+c[a.nodesCol][c[a.nodesCol].length-1].tId+F);h("#"+c[a.nodesCol][c[a.nodesCol].length-1].tId+u);if(c==a.root)if(c[a.nodesCol].length==1)G(e,za);else{c=h("#"+c[a.nodesCol][0].tId+F);G(c,Aa);G(e,ja)}else G(e,ja);d.removeClass(ha)}}function db(a,b,c,d){if(!b||!c)return null;
for(var e=0;e<b.length;e++){if(b[e][c]==d)return b[e];var g=db(a,b[e][a.nodesCol],c,d);if(g)return g}return null}function eb(a,b,c,d){if(!b||!c)return[];for(var e=[],g=0;g<b.length;g++){b[g][c]==d&&e.push(b[g]);e=e.concat(eb(a,b[g][a.nodesCol],c,d))}return e}function fb(a,b,c,d){if(!b||!c)return[];for(var e=[],g=0;g<b.length;g++){typeof b[g][c]=="string"&&b[g][c].indexOf(d)>-1&&e.push(b[g]);e=e.concat(fb(a,b[g][a.nodesCol],c,d))}return e}function J(a,b){if(!(a.curTreeNode==b&&a.curEditTreeNode==b&&
b.editNameStatus)){I.cancelPreEditNode(a);I.cancelPreSelectedNode(a);if(a.editable&&b.editNameStatus){h("#"+b.tId+V).html("<input type=text class='rename' id='"+b.tId+X+"' treeNode"+X+" >");var c=h("#"+b.tId+X);a.curEditInput=c;c.attr("value",b[a.nameCol]);i.inputFocus(c);c.bind("blur",function(){if(I.checkEvent(a)){b.editNameStatus=false;J(a,b)}}).bind("keyup",function(d){if(d.keyCode=="13"){if(I.checkEvent(a)){b.editNameStatus=false;J(a,b)}}else if(d.keyCode=="27"){c.attr("value",b[a.nameCol]);
b.editNameStatus=false;J(a,b)}}).bind("click",function(){return false}).bind("dblclick",function(){return false});h("#"+b.tId+p).addClass(gb);a.curEditTreeNode=b}else h("#"+b.tId+p).addClass(Ia);Xa(a,b);a.curTreeNode=b}}function hb(a,b,c){if(!b)return[];for(var d=[],e=0;e<b.length;e++){if(b[e][a.checkedCol]==c)d=d.concat([b[e]]);var g=hb(a,b[e][a.nodesCol],c);if(g.length>0)d=d.concat(g)}return d}function ib(a,b){if(!b)return[];for(var c=[],d=0;d<b.length;d++){if(b[d][a.checkedCol]!=b[d].checkedOld)c=
c.concat([b[d]]);var e=ib(a,b[d][a.nodesCol]);if(e.length>0)c=c.concat(e)}return c}function Ha(a,b){var c,d=a.treeNodeKey,e=a.treeNodeParentKey;if(!d||d==""||!b)return[];if(i.isArray(b)){var g=[],f=[];for(c=0;c<b.length;c++)f[b[c][d]]=b[c];for(c=0;c<b.length;c++)if(f[b[c][e]]){f[b[c][e]][a.nodesCol]||(f[b[c][e]][a.nodesCol]=[]);f[b[c][e]][a.nodesCol].push(b[c])}else g.push(b[c]);return g}else return[b]}function Ja(a,b){if(!b)return[];var c=[];if(i.isArray(b))for(var d=0;d<b.length;d++){c.push(b[d]);
if(b[d][a.nodesCol])c=c.concat(Ja(a,b[d][a.nodesCol]))}else{c.push(b);if(b[a.nodesCol])c=c.concat(Ja(a,b[a.nodesCol]))}return c}function sb(){return{container:null,setting:null,init:function(a){this.container=a;this.setting=q[a.attr("id")];return this},refresh:function(){this.setting.treeObj.empty();this.setting.curTreeNode=null;this.setting.curEditTreeNode=null;this.setting.dragStatus=0;this.setting.dragNodeShowBefore=false;this.setting.checkRadioCheckedList=[];ga(this.setting,0,this.setting.root[this.setting.nodesCol])},
setEditable:function(a){this.setting.editable=a;return this.refresh()},transformTozTreeNodes:function(a){return Ha(this.setting,a)},transformToArray:function(a){return Ja(this.setting,a)},getNodes:function(){return this.setting.root[this.setting.nodesCol]},getSelectedNode:function(){return this.setting.curTreeNode},getCheckedNodes:function(a){return hb(this.setting,this.setting.root[this.setting.nodesCol],a!=false)},getChangeCheckedNodes:function(){return ib(this.setting,this.setting.root[this.setting.nodesCol])},
getNodeByTId:function(a){if(!a)return null;return R[a]},getNodeByParam:function(a,b){if(!a)return null;return db(this.setting,this.setting.root[this.setting.nodesCol],a,b)},getNodesByParam:function(a,b){if(!a)return null;return eb(this.setting,this.setting.root[this.setting.nodesCol],a,b)},getNodesByParamFuzzy:function(a,b,c){if(!a)return null;return fb(this.setting,c?c[this.setting.nodesCol]:this.setting.root[this.setting.nodesCol],a,b)},getNodeIndex:function(a){if(!a)return null;for(var b=a.parentNode==
null?this.setting.root:a.parentNode,c=0;c<b[this.setting.nodesCol].length;c++)if(b[this.setting.nodesCol][c]==a)return c;return-1},getSetting:function(){var a=this.setting,b={checkType:{},callback:{}},c=a.checkType;a.checkType=undefined;var d=a.callback;a.callback=undefined;var e=a.root;a.root=undefined;h.extend(b,a);a.checkType=c;a.callback=d;a.root=e;h.extend(true,b.checkType,c);h.extend(b.callback,d);return b},updateSetting:function(a){if(a){var b=this.setting,c=b.treeObjId,d=a.checkType;a.checkType=
undefined;var e=a.callback;a.callback=undefined;var g=a.root;a.root=undefined;h.extend(b,a);a.checkType=d;a.callback=e;a.root=g;h.extend(true,b.checkType,d);h.extend(b.callback,e);b.treeObjId=c;b.treeObj=this.container}},expandAll:function(a){Ga(this.setting,null,a,true)},expandNode:function(a,b,c,d){if(a){b&&a.parentNode&&ba(this.setting,a.parentNode,b,false);if(c)Ga(this.setting,a,b,false,function(){d!==false&&h("#"+a.tId+u).focus().blur()});else if(a.open!=b){Ea(this.setting,a);d!==false&&h("#"+
a.tId+u).focus().blur()}}},selectNode:function(a){if(a)if(I.checkEvent(this.setting)){J(this.setting,a);a.parentNode?ba(this.setting,a.parentNode,true,false,function(){h("#"+a.tId+u).focus().blur()}):h("#"+a.tId+u).focus().blur()}},cancleSelectedNode:function(){this.cancelSelectedNode()},cancelSelectedNode:function(){I.cancelPreSelectedNode(this.setting)},checkAllNodes:function(a){var b=this.setting;if(b.checkable)for(var c=0;c<b.root[b.nodesCol].length;c++){var d=b.root[b.nodesCol][c];d[b.checkedCol]=
a;ka(b,d,a)}},reAsyncChildNodes:function(a,b){if(this.setting.async){var c=!a;if(c)a=this.setting.root;if(b=="refresh"){a[this.setting.nodesCol]=[];c?this.setting.treeObj.empty():h("#"+a.tId+C).empty()}Fa(this.setting,c?null:a)}},addNodes:function(a,b,c){if(b){a||(a=null);b=i.isArray(b)?b:[b];L(this.setting,a,b,c==true)}},inputNodeName:function(a){if(a)if(I.checkEvent(this.setting)){var b=this.setting;a.editNameStatus=true;Z(b,a);J(b,a)}},updateNode:function(a,b){if(a){var c=h("#"+a.tId+x);if(this.setting.checkable){b==
true&&Ya(this.setting,a);K(this.setting,c,a);T(this.setting,a)}c=this.setting;h("#"+a.tId+V).text(a[c.nameCol]);h("#"+a.tId+p).attr("target",a.target||"_blank");var d=this.setting;c=h("#"+a.tId+p);d=a.url&&!d.editable?a.url:null;d==null||d.length==0?c.removeAttr("href"):c.attr("href",d);S(this.setting,a);d=this.setting;c=h("#"+a.tId+p);(d=Pa(d,a))&&c.css(d)}},moveNode:function(a,b,c){if(b)if(!(a&&(b.parentNode==a&&c==t||h("#"+b.tId).find("#"+a.tId).length>0))){a||(a=null);ca(this.setting,a,b,c,false)}},
copyNode:function(a,b,c){if(!b)return null;b=i.clone(b);if(!a){a=null;c=t}if(c==t)L(this.setting,a,[b]);else{L(this.setting,a.parentNode,[b]);ca(this.setting,a,b,c,false)}return b},removeNode:function(a){a&&Ba(this.setting,a)}}}var na="ZTREE_NODECREATED",oa="ZTREE_CLICK",pa="ZTREE_CHANGE",qa="ZTREE_RENAME",ra="ZTREE_REMOVE",sa="ZTREE_DRAG",fa="ZTREE_DROP",ta="ZTREE_EXPAND",ua="ZTREE_COLLAPSE",va="ZTREE_ASYNC_SUCCESS",wa="ZTREE_ASYNC_ERROR",F="_switch",u="_ico",V="_span",X="_input",x="_check",$="_edit",
aa="_remove",C="_ul",p="_a",za="root",Aa="roots",Va="center",ja="bottom",Wa="noLine",ha="line",M="open",N="close",O="docu",Ia="curSelectedNode",gb="curSelectedNode_Edit",U="radio",rb="chk",pb="false",ob="true",Za="full",$a="part",qb="focus",xa="all",t="inner",da="before",la="after",q=[],lb=0,R=[];h.fn.zTree=function(a,b){var c={treeObjId:"",treeObj:null,checkable:false,editable:false,edit_renameBtn:true,edit_removeBtn:true,showLine:true,showIcon:true,keepParent:false,keepLeaf:false,curTreeNode:null,
curEditTreeNode:null,dragStatus:0,dragNodeShowBefore:false,dragCopy:false,dragMove:true,checkStyle:"checkbox",checkType:{Y:"ps",N:"ps"},checkRadioType:"level",checkRadioCheckedList:[],async:false,asyncUrl:"",asyncParam:[],asyncParamOther:[],asyncDataFilter:null,isSimpleData:false,treeNodeKey:"",treeNodeParentKey:"",rootPID:null,nameCol:"name",nodesCol:"nodes",checkedCol:"checked",expandSpeed:"fast",expandTriggerFlag:false,addHoverDom:null,removeHoverDom:null,addDiyDom:null,fontCss:{},root:{isRoot:true,
nodes:[]},callback:{beforeAsync:null,beforeClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeChange:null,beforeDrag:null,beforeDrop:null,beforeRename:null,beforeRemove:null,beforeExpand:null,beforeCollapse:null,confirmDragOpen:null,confirmRename:null,nodeCreated:null,click:null,rightClick:null,mouseDown:null,mouseUp:null,change:null,drag:null,drop:null,rename:null,remove:null,expand:null,collapse:null,asyncConfirmData:null,asyncSuccess:null,asyncError:null}};if(a){var d=
a.checkType;a.checkType=undefined;var e=a.callback;a.callback=undefined;var g=a.root;a.root=undefined;h.extend(c,a);a.checkType=d;h.extend(true,c.checkType,d);a.callback=e;h.extend(c.callback,e);a.root=g;h.extend(c.root,g)}c.treeObjId=this.attr("id");c.treeObj=this;c.root.tId=-1;c.root.name="ZTREE ROOT";c.root.isRoot=true;c.checkRadioCheckedList=[];c.curTreeNode=null;c.curEditTreeNode=null;c.dragNodeShowBefore=false;c.dragStatus=0;c.expandTriggerFlag=false;c.root[c.nodesCol]||(c.root[c.nodesCol]=
[]);if(b)c.root[c.nodesCol]=b;if(c.isSimpleData)c.root[c.nodesCol]=Ha(c,c.root[c.nodesCol]);q[c.treeObjId]=c;c.treeObj.empty();kb(c,this);if(c.root[c.nodesCol]&&c.root[c.nodesCol].length>0)ga(c,0,c.root[c.nodesCol]);else c.async&&c.asyncUrl&&c.asyncUrl.length>0&&Fa(c);return(new sb).init(this)};var i={eqs:function(a,b){return a.toLowerCase()===b.toLowerCase()},isArray:function(a){return Object.prototype.toString.apply(a)==="[object Array]"},noSel:function(){window.getSelection?window.getSelection().removeAllRanges():
document.selection.empty()},inputFocus:function(a){if(a.get(0)){a.focus();var b=a.get(0);a=a.val().length;if(b.setSelectionRange){b.focus();b.setSelectionRange(a,a)}else if(b.createTextRange){b=b.createTextRange();b.collapse(true);b.moveEnd("character",a);b.moveStart("character",a);b.select()}}},apply:function(a,b,c){if(typeof a=="function")return a.apply(i,b);return c},getAbs:function(a){oRect=a.getBoundingClientRect();return[oRect.left,oRect.top]},clone:function(a){var b;if(a instanceof Array){b=
[];for(var c=a.length;c--;)b[c]=arguments.callee(a[c]);return b}else if(typeof a=="function")return a;else if(a instanceof Object){b={};for(c in a)if(c!="parentNode")b[c]=arguments.callee(a[c]);return b}else return a}},I={checkEvent:function(a){return I.checkCancelPreEditNode(a)},cancelPreSelectedNode:function(a){if(a.curTreeNode){h("#"+a.curTreeNode.tId+p).removeClass(Ia);h("#"+a.curTreeNode.tId+V).text(a.curTreeNode[a.nameCol]);Z(a,a.curTreeNode);a.curTreeNode=null}},checkCancelPreEditNode:function(a){if(a.curEditTreeNode){var b=
a.curEditInput;if(i.apply(a.callback.confirmRename,[a.treeObjId,a.curEditTreeNode,b.val()],true)===false){a.curEditTreeNode.editNameStatus=true;i.inputFocus(b);return false}}return true},cancelPreEditNode:function(a){if(a.curEditTreeNode){var b=h("#"+a.curEditTreeNode.tId+X);a.curEditTreeNode[a.nameCol]=b.val();a.treeObj.trigger(qa,[a.treeObjId,a.curEditTreeNode]);h("#"+a.curEditTreeNode.tId+p).removeClass(gb);b.unbind();h("#"+a.curEditTreeNode.tId+V).text(a.curEditTreeNode[a.nameCol]);a.curEditTreeNode.editNameStatus=
false;a.curEditTreeNode=null;a.curEditInput=null}return true}},B={onSwitchNode:function(a){var b=q[a.data.treeObjId];a=a.data.treeNode;if(a.open){if(i.apply(b.callback.beforeCollapse,[b.treeObjId,a],true)==false)return}else if(i.apply(b.callback.beforeExpand,[b.treeObjId,a],true)==false)return;b.expandTriggerFlag=true;Ea(b,a)},onClickNode:function(a){var b=q[a.data.treeObjId];a=a.data.treeNode;if(i.apply(b.callback.beforeClick,[b.treeObjId,a],true)!=false){J(b,a);b.treeObj.trigger(oa,[b.treeObjId,
a])}},onCheckNode:function(a){var b=q[a.data.treeObjId];a=a.data.treeNode;if(i.apply(b.callback.beforeChange,[b.treeObjId,a],true)!=false){a[b.checkedCol]=!a[b.checkedCol];Ya(b,a);var c=h("#"+a.tId+x);K(b,c,a);T(b,a);b.treeObj.trigger(pa,[b.treeObjId,a])}},onMouseoverCheck:function(a){var b=q[a.data.treeObjId];a=a.data.treeNode;var c=h("#"+a.tId+x);a.checkboxFocus=true;K(b,c,a)},onMouseoutCheck:function(a){var b=q[a.data.treeObjId];a=a.data.treeNode;var c=h("#"+a.tId+x);a.checkboxFocus=false;K(b,
c,a)},onMousedownNode:function(a){var b=q[a.data.treeObjId],c=a.data.treeNode;if(!(a.button==2||!b.editable||!b.dragCopy&&!b.dragMove)){var d=a.target;if(!(c.editNameStatus&&i.eqs(d.tagName,"input")&&d.getAttribute("treeNode"+X)!==null)){var e=document,g,f,k,o=false,j=b,A=null,D=null,n=null,r=t,ma=a.clientX,tb=a.clientY,jb=(new Date).getTime();h(e).mousemove(function(m){i.noSel();if(b.dragStatus==0&&Math.abs(ma-m.clientX)<"5"&&Math.abs(tb-m.clientY)<"5")return true;h("body").css("cursor","pointer");
if(b.dragStatus==0&&c.isParent&&c.open){P(b,c,!c.open);b.dragNodeShowBefore=true}if(b.dragStatus==0){b.dragStatus=-1;if(i.apply(b.callback.beforeDrag,[b.treeObjId,c],true)==false)return true;b.dragStatus=1;Ua(true);c.editNameStatus=false;J(b,c);Z(b,c);var s=h("#"+c.tId).clone();s.attr("id",c.tId+"_tmp");s.css("padding","0");s.children("#"+c.tId+p).removeClass(Ia);s.children("#"+c.tId+C).css("display","none");g=h("<ul class='zTreeDragUL'></ul>").append(s);g.attr("id",c.tId+C+"_tmp");g.addClass(b.treeObj.attr("class"));
g.appendTo("body");f=h("<button class='tmpzTreeMove_arrow'></button>");f.attr("id","zTreeMove_arrow_tmp");f.appendTo("body");b.treeObj.trigger(sa,[b.treeObjId,c])}if(b.dragStatus==1&&f.attr("id")!=m.target.id){if(k){k.removeClass("tmpTargetTree");n&&h("#"+n+p,k).removeClass("tmpTargetNode")}n=k=null;o=false;j=b;for(var l in q)if(q[l].editable&&q[l].treeObjId!=b.treeObjId&&(m.target.id==q[l].treeObjId||h(m.target).parents("#"+q[l].treeObjId).length>0)){o=true;j=q[l]}s=h(e).scrollTop();l=h(e).scrollLeft();
var H=j.treeObj.offset(),Ka=j.treeObj.get(0).scrollHeight,v=j.treeObj.get(0).scrollWidth,y=m.clientY+s-H.top,Q=j.treeObj.height()+H.top-m.clientY-s,E=m.clientX+l-H.left;H=j.treeObj.width()+H.left-m.clientX-l;y=y<10&&y>-5;Q=Q<10&&Q>-5;E=E<10&&E>-5;H=H<10&&H>-5;var ub=y&&j.treeObj.scrollTop()<=0;Ka=Q&&j.treeObj.scrollTop()+j.treeObj.height()+10>=Ka;var vb=E&&j.treeObj.scrollLeft()<=0;v=H&&j.treeObj.scrollLeft()+j.treeObj.width()+10>=v;if(m.target.id&&j.treeObj.find("#"+m.target.id).length>0){for(var z=
m.target;z&&z.tagName&&!i.eqs(z.tagName,"li")&&z.id!=j.treeObjId;)z=z.parentNode;var La=false;if(c.parentNode&&z.id!=c.tId&&h("#"+c.tId).find("#"+z.id).length==0)La=true;else if(c.parentNode==null&&z.id!=c.tId&&h("#"+c.tId).find("#"+z.id).length==0)La=true;if(La)if(m.target.id&&(m.target.id==z.id+p||h(m.target).parents("#"+z.id+p).length>0)){k=h(z);n=z.id}}if(m.target.id==j.treeObjId||h(m.target).parents("#"+j.treeObjId).length>0){if(!k&&(ub||Ka||vb||v)&&(o||!o&&c.parentNode!=null)){k=j.treeObj;k.addClass("tmpTargetTree")}if(y)j.treeObj.scrollTop(j.treeObj.scrollTop()-
10);else Q&&j.treeObj.scrollTop(j.treeObj.scrollTop()+10);if(E)j.treeObj.scrollLeft(j.treeObj.scrollLeft()-10);else H&&j.treeObj.scrollLeft(j.treeObj.scrollLeft()+10);k&&k!=j.treeObj&&k.offset().left<j.treeObj.offset().left&&j.treeObj.scrollLeft(j.treeObj.scrollLeft()+k.offset().left-j.treeObj.offset().left)}g.css({top:m.clientY+s+3+"px",left:m.clientX+l+3+"px"});v=l=0;if(k&&k.attr("id")!=j.treeObjId){y=n==null?null:R[n];l=h("#"+c.tId);v=l.prev().attr("id")==n;l=l.next().attr("id")!=n;v=!v;E=!(c.parentNode&&
c.parentNode.tId==n)&&!(j.keepLeaf&&!y.isParent);if(!l&&!v&&!E){k=null;n="";r=t;f.css({display:"none"});window.zTreeMoveTimer&&clearTimeout(window.zTreeMoveTimer)}else{y=h("#"+n+p,k);y.addClass("tmpTargetNode");Q=l?E?0.25:v?0.5:1:-1;E=v?E?0.75:l?0.5:0:-1;m=(m.clientY+s-y.offset().top)/y.height();if((Q==1||m<=Q&&m>=-0.2)&&l){l=1-f.width();v=0-f.height()/2;r=da}else if((E==0||m>=E&&m<=1.2)&&v){l=1-f.width();v=y.height()-f.height()/2;r=la}else{l=5-f.width();v=0;r=t}f.css({display:"block",top:y.offset().top+
v+"px",left:y.offset().left+l+"px"});if(A!=n||D!=r)jb=(new Date).getTime();if(r==t)window.zTreeMoveTimer=setTimeout(function(){if(r==t){var ea=R[n];ea&&ea.isParent&&!ea.open&&(new Date).getTime()-jb>500&&i.apply(j.callback.confirmDragOpen,[j.treeObjId,ea],true)&&Ea(j,ea)}},600)}}else{r=t;f.css({display:"none"});window.zTreeMoveTimer&&clearTimeout(window.zTreeMoveTimer)}A=n;D=r}return false});h(e).mouseup(function(m){window.zTreeMoveTimer&&clearTimeout(window.zTreeMoveTimer);D=A=null;h(e).unbind("mousemove");
h(e).unbind("mouseup");h("body").css("cursor","auto");if(k){k.removeClass("tmpTargetTree");n&&h("#"+n+p,k).removeClass("tmpTargetNode")}Ua(false);if(b.dragStatus!=0){b.dragStatus=0;if(c.isParent&&b.dragNodeShowBefore&&!c.open){P(b,c,!c.open);b.dragNodeShowBefore=false}g&&g.remove();f&&f.remove();if(k&&n&&c.parentNode&&n==c.parentNode.tId&&r==t)k=null;if(k){var s=n==null?null:R[n];if(i.apply(b.callback.beforeDrop,[j.treeObjId,c,s,r],true)!=false){var l=(m=m.ctrlKey&&b.dragMove&&b.dragCopy||!b.dragMove&&
b.dragCopy)?i.clone(c):c;if(o){m||Ba(b,c);if(r==t)L(j,s,[l]);else{L(j,s.parentNode,[l]);ca(j,s,l,r,false)}}else if(m)if(r==t)L(j,s,[l]);else{L(j,s.parentNode,[l]);ca(j,s,l,r,false)}else ca(j,s,l,r);J(j,l);h("#"+l.tId+u).focus().blur();b.treeObj.trigger(fa,[j.treeObjId,l,s,r])}}else b.treeObj.trigger(fa,[b.treeObjId,null,null,null])}});a.preventDefault&&a.preventDefault()}}},onHoverOverNode:function(a){var b=q[a.data.treeObjId],c=a.data.treeNode;if(b.curHoverTreeNode!=c){a.data.treeNode=b.curHoverTreeNode;
B.onHoverOutNode(a)}b.curHoverTreeNode=c;Xa(b,c)},onHoverOutNode:function(a){a=q[a.data.treeObjId];a.curHoverTreeNode&&a.curTreeNode!=a.curHoverTreeNode&&Z(a,a.curHoverTreeNode)},onZTreeMousedown:function(a){var b=q[a.data.treeObjId],c=a.data.treeNode;i.apply(b.callback.beforeMouseDown,[b.treeObjId,c],true)&&i.apply(b.callback.mouseDown,[a,b.treeObjId,c]);return true},onZTreeMouseup:function(a){var b=q[a.data.treeObjId],c=a.data.treeNode;i.apply(b.callback.beforeMouseUp,[b.treeObjId,c],true)&&i.apply(b.callback.mouseUp,
[a,b.treeObjId,c]);return true},onZTreeDblclick:function(a){var b=q[a.data.treeObjId],c=a.data.treeNode;i.apply(b.callback.beforeDblclick,[b.treeObjId,c],true)&&i.apply(b.callback.dblclick,[a,b.treeObjId,c]);return true},onZTreeContextmenu:function(a){var b=q[a.data.treeObjId],c=a.data.treeNode;i.apply(b.callback.beforeRightClick,[b.treeObjId,c],true)&&i.apply(b.callback.rightClick,[a,b.treeObjId,c]);return typeof b.callback.rightClick!="function"}},ia=[]})(jQuery);